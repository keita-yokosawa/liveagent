<html>

  <head>
    <title>CHAT PAGE FOR MEMBER</title>
    <style scoped>
#chat-widget-frame {
  pointer-events: auto;
}
.chat-widget-section {
  pointer-events: none;
}
.chat-widget-section {
  bottom: 0px;
  right: 310px;
  position: fixed;
  z-index: 998;
}
@media (max-width: 1024px) {
  .chat-widget-section {
    bottom: 0px;
    right: 0px;
    position: fixed;
    z-index: 998;
  }
}
</style>
  <script>

   window.onload = function() {
            window.addEventListener("message", callbackPostMessage);
    }
    window.onunload = function() {
            window.removeEventListener("message", callbackPostMessage);
    }


   function  calculateChatWidgetFrameSize(originFrameSize) {
       const adjustedHeight = originFrameSize.frameHeight;
       const adjustedWidth = originFrameSize.frameWidth;
       let originFrmSize = {
           frameHeight: adjustedHeight + 'px',
           frameWidth: adjustedWidth + 'px'
       };
       return originFrmSize;
     }

   function  updateChatWidgetFrameSize(originFrameSize) {
       if (!originFrameSize.frameHeight || !originFrameSize.frameWidth) {
         return;
       }

       const frmSize = calculateChatWidgetFrameSize(originFrameSize);
       var chatWidgetFrame = document.getElementById("chat-widget-frame");
       chatWidgetFrame.style.height = frmSize.frameHeight;
       chatWidgetFrame.style.width = frmSize.frameWidth;
     }

   function  callbackPostMessage(event) {
       if (event.origin !== location.origin) {
         return;
       }

       console.log('test000001');
       console.log(event.data);
       this.updateChatWidgetFrameSize(event.data);
   }

    
  </script>

  </head>

  <body>

    <div>テストです</div>

    
<div style="background-color:blue"><iframe id="chat-widget-frame" src="./ChatEmbeddedForMember.html" style="background-color:red"></iframe></div>

  </body>
  
</html>
